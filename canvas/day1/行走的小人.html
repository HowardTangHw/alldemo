<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>this</title>
</head>
<body>
	<canvas id="demo"></canvas>
	<button id="top">向上</button>
		<button id="bottom">向下</button>
	<button id="left">向左</button>
<button id="right">向右</button>
	<script type="text/javascript">
		var canvas = document.getElementById("demo");
		var bottom = document.getElementById("bottom");
		canvas.width=600;
		canvas.height=600;
		canvas.style.border="1px solid #e0e0e0";
		var ctx = canvas.getContext("2d");
		var img =new Image();
		img.src="img/1.png";
		img.onload=function(){
			 var width=img.width/4;
			 var height=img.height/4;
			// ctx.drawImage(img, 0, 0, widht, widht, 251, 251, widht, height);
			// // 清除上一个小人;
			// ctx.clearRect(0, 0, canvas.width, canvas.height);
			var stateX=0;
			var stateY=0;
			var timer;
			bottom.onclick=function(){
				stateY=0;
				clearInterval(timer);
				timer=setInterval(autoplay,1000/10);
			}
				


						document.getElementById("top").onclick=function(){
				stateY=3;
								clearInterval(timer);
				timer=setInterval(autoplay,1000/10);
				}
									document.getElementById("left").onclick=function(){
				stateY=1;
								clearInterval(timer);
				timer=setInterval(autoplay,1000/10);
			}
												document.getElementById("right").onclick=function(){
				stateY=2;
								clearInterval(timer);
				timer=setInterval(autoplay,1000/10);
			}
			timer=setInterval(autoplay,1000/10);
			function autoplay(){
				ctx.clearRect(0, 0, canvas.width, canvas.height);
				ctx.drawImage(img, stateX*width, stateY*height, width, height, 251, 251, width, height);
				stateX++;
				if(stateX>3)
				{
					stateX=0;
				}
			
				}
			}
	</script>
</body>
</html>