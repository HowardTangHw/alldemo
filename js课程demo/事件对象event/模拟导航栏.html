<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<style>
		.box {
			width: 300px;
			height: 300px;
			border: 1px solid red;
			margin: 100px auto;
			position: relative;
		}
		.content{
			padding: 5px 18px 5px 5px;
			position: absolute;
		}
		.scroll{
			width: 18px;
			height: 100%;
			position: absolute;
			top: 0;
			right: 0;
			background-color: #ccc;
		}
		.bar {
			width: 18px;
			height: 100px;
			background: red;
			border-radius: 9px;
			cursor: pointer;
			position: absolute;
		}
	</style>
	<body>
		<div class="box" id="box">
			<div class="content"id="con">哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈</div>
			<div class="scroll"><div class="bar" id="bar"></div></div>
		</div>
	</body>
</html>
<script>
	var box = document.getElementById("box");
	var con = document.getElementById("con");
	var bar = document.getElementById("bar");
	//动态生成导航栏的高度  公式 (容器高度/内容高度*容器高度)
	bar.style.height=box.offsetHeight/con.offsetHeight*box.offsetHeight+"px";
	bar.onmousedown=function(event){
		var event = event||window.event;
		var mousey=event.pageY-bar.offsetTop;//记录点击时,鼠标在的y坐标
	
		var yy=event.pageY-bar.offsetTop;//点击时鼠标的位置-导航栏距离顶部的距离

		window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();
		document.onmousemove=function(event){
			var event = event||window.event;
			var y =event.pageY-mousey;//导航栏距离顶部的距离=(现在鼠标的位置)-(点击时鼠标的位置-导航栏距离顶部的距离)
//			console.log(y,bar.offsetTop);
	
			if(y<0)
			{
				y=0;
				con.style.top=0;
			}
			else if (y>box.offsetHeight-bar.offsetHeight){
				y=box.offsetHeight-bar.offsetHeight;
				cons.style.top=bli*y+"px";
			}
		// 比例计算公式(内容高度-容器高度)/(容器高度-导航栏高度)*移动的距离
			var bli= (con.offsetHeight-box.offsetHeight)/(box.offsetHeight-bar.offsetHeight);
			
			bar.style.top=y+"px";
			con.style.top=bli*-y+"px";
			window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();
		}
		document.onmouseup=function(){
			document.onmousemove=null;
			window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();
		}
	}
</script>